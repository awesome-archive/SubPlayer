(this.webpackJsonpsubplayer=this.webpackJsonpsubplayer||[]).push([[0],{125:function(e){e.exports=JSON.parse('{"a":"1.0.2"}')},141:function(e,t,n){e.exports=n(237)},151:function(e,t){},231:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(39),o=n.n(i),s=n(53),l=n(10),u=n(12),c=n(23),m=n(21),d=n(22),h=n(18),y=n(19),f=n(5),b=n(7),p=n.n(b),k=n(77),g=n(24),v=n.n(g),x=n(28),w=n.n(x),S=n(46),E=n(57),O=n.n(E);function T(e){var t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[:.]/).map((function(e,t,n){if(t===n.length-1){if(1===e.length)return"."+e+"00";if(2===e.length)return"."+e+"0"}else if(1===e.length)return(0===t?"0":":0")+e;return 0===t?e:t===n.length-1?"."+e:":"+e})).join("")}return"WEBVTT\n\n"+e.split(/\r?\n/).map((function(e){var a=e.match(t);return a?{start:n(a[1].trim()),end:n(a[2].trim()),text:a[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(e){return e.trim()})).join("\n")}:null})).filter((function(e){return e})).map((function(e,t){return e?t+1+"\n"+e.start+" --\x3e "+e.end+"\n"+e.text:""})).filter((function(e){return e.trim()})).join("\n\n")}var j=function(){function e(t,n,a){Object(l.a)(this,e),this.start=t,this.end=n,this.text=a,this.editing=!1,this.highlight=!1}return Object(u.a)(e,[{key:"check",get:function(){return this.startTime>=0&&this.endTime>=0&&this.startTime<this.endTime&&this.text.trim()}},{key:"clone",get:function(){return new e(this.start,this.end,this.text)}},{key:"startTime",get:function(){return U(this.start)},set:function(e){this.start=z(P(e,0,1/0))}},{key:"endTime",get:function(){return U(this.end)},set:function(e){this.end=z(P(e,0,1/0))}},{key:"duration",get:function(){return(this.endTime-this.startTime).toFixed(3)}}]),e}();function C(e){return/^(\d+):([0-5][0-9]):([0-5][0-9])\.\d{3}$/.test(e)}function A(e){return e.includes("?")?A(e.split("?")[0]):e.includes("#")?A(e.split("#")[0]):e.trim().toLowerCase().split(".").pop()}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}function P(e,t,n){return Math.max(Math.min(e,Math.max(t,n)),Math.min(t,n))}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return O.a.d2t(e.toFixed(3))}function U(e){return O.a.t2d(e)}function R(e){return new Promise((function(t,n){var a=document.createElement("video"),r=document.createElement("track");r.default=!0,r.kind="metadata",a.appendChild(r),r.onerror=function(e){n(e)},r.onload=function(){t(Array.from(r.track.cues).map((function(e){var t=z(e.startTime),n=z(e.endTime),a=e.text;return new j(t,n,a)})))},r.src=e}))}function D(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function N(e){return"WEBVTT\n\n"+e.map((function(e,t){return t+1+"\n"+e.start+" --\x3e "+e.end+"\n"+e.text})).join("\n\n")}function L(e){return"WEBVTT \r\n\r\n".concat(e.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n"))}function I(){return(I=Object(S.a)(w.a.mark((function e(t){var n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.text();case 6:if(a=e.sent,"srt"!==(r=A(t))){e.next=10;break}return e.abrupt("return",L(a));case 10:if("ass"!==r){e.next=12;break}return e.abrupt("return",T(a));case 12:return e.abrupt("return",a.replace(/{[\s\S]*?}/g,""));case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function $(e){return e.replace(/[&<>'"]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e}))}function B(e){var t=new URL(window.location.href);return decodeURIComponent(t.searchParams.get(e)||"")}var V=n(125);function H(){var e=Object(h.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-left: 10px;\n    margin-right: 20px;\n    color: #ccc;\n    border: none;\n    background-color: #1a536d;\n    width: 45px;\n    padding: 4px 0;\n    font-size: 12px;\n    border-radius: 15px;\n    cursor: pointer;\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: #03a9f4;\n    }\n"]);return H=function(){return e},e}function F(){var e=Object(h.a)(["\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n"]);return F=function(){return e},e}function W(){var e=Object(h.a)(["\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    width: 170px;\n    cursor: pointer;\n    overflow: hidden;\n    color: #ccc;\n    background-color: rgb(46, 54, 60);\n    border-left: 1px solid rgb(10, 10, 10);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(66, 82, 95);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n"]);return W=function(){return e},e}function _(){var e=Object(h.a)(["\n    font-size: 12px;\n    font-style: italic;\n    margin-left: 10px;\n    opacity: 0.4;\n"]);return _=function(){return e},e}function G(){var e=Object(h.a)(["\n    color: #fff;\n    font-size: 16px;\n    text-decoration: none;\n\n    .beta {\n        color: #67bf00;\n        font-size: 12px;\n        margin-left: 5px;\n    }\n"]);return G=function(){return e},e}function q(){var e=Object(h.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 50px;\n    border-bottom: 1px solid rgb(10, 10, 10);\n    background-color: rgb(28, 32, 34);\n\n    .left {\n        display: flex;\n        align-items: center;\n        height: 100%;\n        padding-left: 20px;\n    }\n\n    .right {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        .links {\n            margin-right: 20px;\n            a {\n                color: #ccc;\n                text-decoration: none;\n                margin-left: 20px;\n\n                &:hover {\n                    color: #fff;\n                }\n            }\n        }\n    }\n"]);return q=function(){return e},e}var J=y.b.header(q()),Y=y.b.a(G()),K=y.b.span(_()),X=y.b.div(W()),Z=y.b.input(F()),Q=y.b.select(H()),ee=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={lang:n.props.getLocale()||"en",translators:{zh:{name:"\u4e2d",key:"chinese"},en:{name:"EN",key:"english"},es:{name:"ES",key:"spanish"}}},n.$subtitle=r.a.createRef(),n.$video=r.a.createRef(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"uploadSubtitle",value:function(){var e=this;if(this.$subtitle.current&&this.$subtitle.current.files[0]){v.a.start().set(.5);var t=this.$subtitle.current.files[0],n=A(t.name);["vtt","srt","ass"].includes(n)?function(e){return new Promise((function(t,n){var a=new FileReader,r=A(e.name);a.onload=function(){t("srt"===r?L(a.result):"ass"===r?T(a.result):a.result.replace(/{[\s\S]*?}/g,""))},a.onerror=function(e){n(e)},a.readAsText(e)}))}(t).then((function(t){R(D(t)).then((function(t){e.props.updateSubtitles(t,!0).then((function(){p.a.success("".concat(Object(f.t)("uploadSubtitle"),": ").concat(t.length)),v.a.done()}))})).catch((function(e){throw p.a.error(e.message),v.a.done(),e}))})).catch((function(e){throw p.a.error(e.message),v.a.done(),e})):(v.a.done(),p.a.error(Object(f.t)("uploadSubtitleErr")))}}},{key:"uploadVideo",value:function(){if(this.$video.current&&this.$video.current.files[0]){v.a.start().set(.5);var e=this.$video.current.files[0],t=document.createElement("video").canPlayType(e.type);if("maybe"===t||"probably"===t){var n=URL.createObjectURL(e);this.props.updateVideoUrl(n),p.a.success("".concat(Object(f.t)("uploadVideo"),": ").concat((e.size/1024/1024).toFixed(3),"M"))}else p.a.error("".concat(Object(f.t)("uploadVideoErr"),": ").concat(e.type||"unknown"));v.a.done()}}},{key:"render",value:function(){var e=this;return r.a.createElement(J,null,r.a.createElement("div",{className:"left"},r.a.createElement(Y,{href:"./"},"SubPlayer ",r.a.createElement("span",{className:"beta"},"Beta ",V.a),r.a.createElement(K,null,r.a.createElement(f.Translate,{value:"description"})))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"links"},r.a.createElement("a",{href:"https://github.com/zhw2590582/SubPlayer"},"Github")),r.a.createElement("i",{className:"icon-language"}),r.a.createElement(Q,{value:this.state.lang,className:"lang-".concat(this.props.lang),onChange:function(t){e.setState({lang:t.target.value}),e.props.setLocale(t.target.value)}},Object.entries(this.state.translators).map((function(e){var t=Object(k.a)(e,2),n=t[0],a=t[1];return r.a.createElement("option",{key:n,value:n},a.name)}))),r.a.createElement(X,null,r.a.createElement("i",{className:"icon-upload"}),r.a.createElement(f.Translate,{value:"btnUploadSubtitle"}),r.a.createElement(Z,{className:"uploadSubtitle",type:"file",name:"file",ref:this.$subtitle,onChange:function(){return e.uploadSubtitle()}})),r.a.createElement(X,null,r.a.createElement("i",{className:"icon-upload"}),r.a.createElement(f.Translate,{value:"btnUploadVideo"}),r.a.createElement(Z,{className:"uploadVideo",type:"file",name:"file",ref:this.$video,onChange:function(){return e.uploadVideo()}})),r.a.createElement(X,{onClick:this.props.downloadSubtitles.bind(this)},r.a.createElement("i",{className:"icon-download"}),r.a.createElement(f.Translate,{value:"btnDownloadSubtitle"}))))}}]),t}(r.a.Component),te=n(137);function ne(){var e=Object(h.a)(["\n    flex: 1;\n    border-right: 1px solid rgb(10, 10, 10);\n    .ReactVirtualized__Table {\n        font-size: 12px;\n        background: #24292d;\n\n        .ReactVirtualized__Table__Grid {\n            outline: none;\n        }\n\n        .ReactVirtualized__Table__headerRow {\n            background: rgb(46, 54, 60);\n            border-bottom: 1px solid rgb(10, 10, 10);\n\n            .row {\n                padding: 10px 5px;\n                font-style: normal;\n                font-weight: normal;\n                font-size: 14px;\n                text-align: center;\n                text-transform: none;\n            }\n        }\n\n        .ReactVirtualized__Table__row {\n            background-color: #1c2022;\n            border-bottom: 1px solid rgb(36, 41, 45);\n            transition: all 0.2s ease;\n\n            &.odd {\n                background-color: rgb(46, 54, 60);\n            }\n\n            &.highlight {\n                color: #fff;\n                background-color: #2196f3;\n                text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n            }\n\n            &.illegal {\n                color: #fff;\n                background-color: #c75123;\n                text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n            }\n\n            .row {\n                padding: 10px 5px;\n                text-align: center;\n            }\n        }\n\n        .input,\n        .textarea {\n            border: none;\n            padding: 5px;\n            min-height: 30px;\n            font-size: 12px;\n            text-align: center;\n            color: #fff;\n            background-color: #3a3a3a;\n        }\n\n        .textarea {\n            resize: vertical;\n        }\n\n        p {\n            line-height: 1.5;\n            margin: 0;\n        }\n    }\n\n    .operation {\n        display: flex;\n        justify-content: center;\n\n        i {\n            width: 25px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n    }\n\n    .edit {\n        display: none;\n        width: 100%;\n        height: 100%;\n    }\n\n    .editing {\n        .noedit {\n            display: none;\n        }\n\n        .edit {\n            display: block;\n        }\n    }\n"]);return ne=function(){return e},e}var ae=y.b.div(ne()),re=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={index:-1,subtitle:{start:"",end:"",text:"",duration:""}},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"check",value:function(){var e=this.state,t=e.index,n=e.subtitle,a=this.props.subtitles,r=U(n.start),i=U(n.end),o=a[t-1],s=a[t+1];if(-1!==t){if(!C(n.start))return p.a.error(Object(f.t)("startTime")),!1;if(!C(n.end))return p.a.error(Object(f.t)("endTime")),!1;if(r>=i)return p.a.error(Object(f.t)("greater")),!1;if(o&&i<o.startTime||s&&r>s.endTime)return p.a.error(Object(f.t)("moveAcross")),!1;o&&r<o.endTime&&p.a.warning(Object(f.t)("overlaps"))}return!0}},{key:"onEdit",value:function(e){var t=this.props.subtitles.indexOf(e);this.setState({index:t,subtitle:{start:e.start,end:e.end,text:e.text,duration:e.duration}}),this.props.editSubtitle(e)}},{key:"onUpdate",value:function(){if(this.check()){var e=this.state,t=e.index,n=e.subtitle;this.props.updateSubtitle(t,new j(n.start,n.end,n.text)),this.setState({index:-1,subtitle:{start:"",end:"",text:"",duration:""}})}}},{key:"onChange",value:function(e,t){var n=this.state.subtitle;n[e]=t,this.setState({subtitle:n})}},{key:"onRemove",value:function(e){this.props.removeSubtitle(e),this.setState({index:-1,subtitle:{start:"",end:"",text:"",duration:""}})}},{key:"render",value:function(){var e=this,t=this.state.subtitle,n=this.props,a=n.subtitles,i=n.mainHeight,o=n.mainWidth,s=n.currentIndex,l=n.checkSubtitleIllegal;return r.a.createElement(ae,null,r.a.createElement(te.a,{headerHeight:40,width:o/2,height:i,rowHeight:60,scrollToIndex:s,rowCount:a.length,rowGetter:function(e){var t=e.index;return a[t]},headerRowRenderer:function(){return r.a.createElement("div",{className:"ReactVirtualized__Table__headerRow"},r.a.createElement("div",{className:"row",style:{width:50},width:"50"},"#"),r.a.createElement("div",{className:"row",style:{width:100},width:"120"},r.a.createElement(f.Translate,{value:"start"})),r.a.createElement("div",{className:"row",style:{width:100},width:"120"},r.a.createElement(f.Translate,{value:"end"})),r.a.createElement("div",{className:"row",style:{width:100},width:"100"},r.a.createElement(f.Translate,{value:"duration"})),r.a.createElement("div",{className:"row",style:{flex:1}},r.a.createElement(f.Translate,{value:"text"})),r.a.createElement("div",{className:"row",style:{width:90},width:"100"},r.a.createElement(f.Translate,{value:"operation"})))},rowRenderer:function(n){return r.a.createElement("div",{key:n.key,className:[n.className,n.index%2?"odd":"",n.rowData.editing?"editing":"",n.rowData.highlight?"highlight":"",l(n.rowData)?"illegal":""].join(" ").trim(),style:n.style},r.a.createElement("div",{className:"row",style:{width:50}},n.index+1),r.a.createElement("div",{className:"row",style:{width:100}},r.a.createElement("span",{className:"noedit"},n.rowData.start),r.a.createElement("input",{maxLength:20,className:"input edit",value:t.start,onChange:function(t){return e.onChange("start",t.target.value)}})),r.a.createElement("div",{className:"row",style:{width:100}},r.a.createElement("span",{className:"noedit"},n.rowData.end),r.a.createElement("input",{maxLength:20,className:"input edit",value:t.end,onChange:function(t){return e.onChange("end",t.target.value)}})),r.a.createElement("div",{className:"row",style:{width:100}},r.a.createElement("span",{className:"noedit"},n.rowData.duration),r.a.createElement("input",{disabled:!0,maxLength:20,className:"input edit",value:t.duration})),r.a.createElement("div",{className:"row",style:{flex:1}},r.a.createElement("span",{className:"noedit"},n.rowData.text.split(/\r?\n/).map((function(e,t){return r.a.createElement("p",{key:t},$(e))}))),r.a.createElement("textarea",{maxLength:100,className:"textarea edit",value:(a=t.text||"",a.replace(/&amp;|&lt;|&gt;|&#39;|&quot;/g,(function(e){return{"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'}[e]||e}))),onChange:function(t){return e.onChange("text",t.target.value)}})),r.a.createElement("div",{className:"row operation",style:{width:90}},r.a.createElement("i",{className:"icon-pencil noedit",onClick:function(){return e.onEdit(n.rowData)}}),r.a.createElement("i",{className:"icon-ok edit",onClick:function(){return e.onUpdate(n.rowData)}}),r.a.createElement("i",{className:"icon-trash-empty",onClick:function(){return e.onRemove(n.rowData)}})));var a}}))}}]),t}(r.a.Component),ie=n(133);function oe(){var e=Object(h.a)(["\n    height: 30px;\n    padding: 0 10px;\n    line-height: 30px;\n    cursor: pointer;\n    font-size: 12px;\n    color: #ccc;\n    background-color: rgba(0, 0, 0, 0.75);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgba(0, 0, 0, 0.9);\n    }\n"]);return oe=function(){return e},e}function se(){var e=Object(h.a)(["\n    position: absolute;\n    z-index: 4;\n    left: 0;\n    top: 0;\n"]);return se=function(){return e},e}function le(){var e=Object(h.a)(["\n    position: absolute;\n    top: 0;\n    height: 100%;\n    cursor: col-resize;\n    user-select: none;\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.1);\n    }\n"]);return le=function(){return e},e}function ue(){var e=Object(h.a)(["\n    position: relative;\n    width: 100%;\n    height: 100%;\n    font-size: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    cursor: move;\n    user-select: none;\n    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);\n"]);return ue=function(){return e},e}function ce(){var e=Object(h.a)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    color: #fff;\n    background-color: rgba(255, 255, 255, 0.2);\n    border-left: 1px solid rgba(255, 255, 255, 0.2);\n    border-right: 1px solid rgba(255, 255, 255, 0.2);\n\n    &:hover {\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n\n    &.highlight {\n        background-color: rgba(33, 150, 243, 0.5);\n        border-left: 1px solid rgba(33, 150, 243, 0.5);\n        border-right: 1px solid rgba(33, 150, 243, 0.5);\n    }\n\n    &.illegal {\n        background-color: rgba(199, 81, 35, 0.5);\n    }\n\n    p {\n        line-height: 1.5;\n        margin: 0;\n    }\n"]);return ce=function(){return e},e}function me(){var e=Object(h.a)(["\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n"]);return me=function(){return e},e}function de(){var e=Object(h.a)(["\n    position: absolute;\n    z-index: 1;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n"]);return de=function(){return e},e}var he=y.b.div(de()),ye=y.b.div(me()),fe=y.b.div(ce()),be=y.b.div(ue()),pe=y.b.div(le()),ke=y.b.div(se()),ge=y.b.div(oe()),ve=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={subtitles:[],contextMenu:!1,contextMenuX:0,contextMenuY:0},n.type="",n.sub=null,n.$sub=null,n.leftDiff=0,n.subWidth=0,n.leftStart=0,n.isDroging=!1,n.isPlaying=!1,n.$subs=r.a.createRef(),n.$contextMenu=r.a.createRef(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onMouseDown",value:function(e,t,n){var a=this.props,r=a.highlightSubtitle,i=a.updateCurrentIndex;this.isPlaying=this.props.art.playing,this.isPlaying?this.props.art.play=!1:(r(e),i(e)),this.sub=e,this.type=n,this.isDroging=!0,this.leftStart=t.pageX;var o=this.state.subtitles.indexOf(e);this.$sub=this.$subs.current.children[o],this.subWidth=parseFloat(this.$sub.style.width)}},{key:"onMousemove",value:function(e){if(this.isDroging){var t=e.pageX-this.leftStart;this.leftDiff=t/this.props.grid/10,"left"===this.type?(this.$sub.style.width="".concat(this.subWidth+-t,"px"),this.$sub.style.transform="translate(".concat(t,"px)")):"right"===this.type?this.$sub.style.width="".concat(this.subWidth+t,"px"):this.$sub.style.transform="translate(".concat(t,"px)")}}},{key:"onMouseup",value:function(){var e=this.props,t=e.subtitles,n=e.videoSeek,a=e.updateSubtitle,r=e.overallOffset,i=e.timeOffset;if(this.isDroging){if(this.leftDiff){var o=t.indexOf(this.sub),s=t[o-1],l=t[o+1],u=this.sub.startTime+this.leftDiff,c=this.sub.endTime+this.leftDiff;s&&c<s.startTime||l&&u>l.endTime?p.a.error(Object(f.t)("moveAcross")):"left"===this.type?u>=0&&u<this.sub.endTime?(this.sub.startTime=u,a(o,this.sub),n(this.sub,this.isPlaying)):(this.$sub.style.width="".concat(this.subWidth,"px"),p.a.error(Object(f.t)("moveInvalid"))):"right"===this.type?c>=0&&c>this.sub.startTime?(this.sub.endTime=c,a(o,this.sub),n(this.sub,this.isPlaying)):(this.$sub.style.width="".concat(this.subWidth,"px"),p.a.error(Object(f.t)("moveInvalid"))):u>0&&c>0&&c>u?(r?i(Number(this.leftDiff.toFixed(3))):(this.sub.startTime=u,this.sub.endTime=c,a(o,this.sub)),n(this.sub,this.isPlaying)):(this.$sub.style.width="".concat(this.subWidth,"px"),p.a.error(Object(f.t)("moveInvalid"))),this.$sub.style.transform="translate(0)"}this.type="",this.sub=null,this.$sub=null,this.leftDiff=0,this.subWidth=0,this.leftStart=0,this.isDroging=!1,this.isPlaying=!1}}},{key:"onContextMenu",value:function(e,t){this.onMouseup(),t.preventDefault(),this.sub=e;var n=this.$subs.current.getBoundingClientRect().top,a=this.$contextMenu.current,r=t.pageY+a.clientHeight>document.body.clientHeight?document.body.clientHeight-a.clientHeight-n:t.pageY-n;this.setState({contextMenu:!0,contextMenuX:t.pageX,contextMenuY:r})}},{key:"hideContextMenu",value:function(){var e=this;this.setState({contextMenu:!1},(function(){e.sub=null}))}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("click",(function(t){t.composedPath().indexOf(e.$contextMenu.current)<0&&e.hideContextMenu()})),document.addEventListener("mousemove",(function(t){e.onMousemove(t)})),document.addEventListener("mouseup",(function(){e.onMouseup()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.subtitles,a=t.contextMenu,i=t.contextMenuX,o=t.contextMenuY,s=this.props,l=s.padding,u=s.grid,c=s.beginTime,m=s.removeSubtitle,d=s.insertSubtitle,h=s.mergeSubtitle,y=s.checkSubtitleIllegal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{style:{padding:"0 ".concat(l,"px")}},r.a.createElement(ye,{ref:this.$subs},n.map((function(t,n){return r.a.createElement(fe,{key:n,onContextMenu:function(n){return e.onContextMenu(t,n)},className:[t.editing?"editing":"",t.highlight?"highlight":"",y(t)?"illegal":""].join(" ").trim(),style:{left:(t.startTime-c)*u*10,width:t.duration*u*10,padding:"0 ".concat(u,"px")}},r.a.createElement(pe,{onMouseDown:function(n){return e.onMouseDown(t,n,"left")},style:{left:0,width:u}}),r.a.createElement(be,{onMouseDown:function(n){return e.onMouseDown(t,n)}},t.text.split(/\r?\n/).map((function(e,t){return r.a.createElement("p",{key:t},$(e))}))),r.a.createElement(pe,{onMouseDown:function(n){return e.onMouseDown(t,n,"right")},style:{right:0,width:u}}))})))),r.a.createElement(ke,{ref:this.$contextMenu,style:{visibility:a?"visible":"hidden",left:i,top:o}},r.a.createElement(ge,{onClick:function(){m(e.sub),e.hideContextMenu()}},r.a.createElement(f.Translate,{value:"deleteLine"})),r.a.createElement(ge,{onClick:function(){var t=e.props.subtitles.indexOf(e.sub);d(t),e.hideContextMenu()}},r.a.createElement(f.Translate,{value:"insertBefore"})),r.a.createElement(ge,{onClick:function(){var t=e.props.subtitles.indexOf(e.sub);d(t+1),e.hideContextMenu()}},r.a.createElement(f.Translate,{value:"insertAfter"})),r.a.createElement(ge,{onClick:function(){h(e.sub),e.hideContextMenu()}},r.a.createElement(f.Translate,{value:"mergeNext"}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.subtitles.filter((function(t){return t.startTime>=e.beginTime&&t.startTime<=e.beginTime+10||t.endTime>=e.beginTime&&t.endTime<=e.beginTime+10}));return Object(ie.a)(n,t.subtitles)?null:{subtitles:n}}}]),t}(r.a.Component),xe=n(138);function we(){var e=Object(h.a)(["\n    position: absolute;\n    z-index: 0;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n"]);return we=function(){return e},e}function Se(){var e=Object(h.a)(["\n    position: relative;\n    display: flex;\n    height: ","px;\n    width: 100%;\n    background-color: rgb(28, 32, 34);\n    border-top: 1px solid rgb(10, 10, 10);\n"]);return Se=function(){return e},e}var Ee=y.b.div(Se(),150),Oe=y.b.div(we()),Te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={$waveform:r.a.createRef(),grid:0,padding:0,beginTime:0},n.wf=null,n.$waveform=r.a.createRef(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.art&&!this.wf&&(this.initWFPlayer(),this.props.art.on("switch",(function(){e.initWFPlayer()})))}},{key:"initWFPlayer",value:function(){var e=this,t=this.props.art,n=t.template.$video;if(n.src){this.wf&&this.wf.destroy(),this.wf=new xe.a({container:this.$waveform.current,waveColor:"rgba(255, 255, 255, 0.1)",progressColor:"rgba(255, 255, 255, 0.3)",cors:!0}),t.on("seek",(function(){e.wf.seek(t.currentTime)}));var a=function(){var t=e.wf,n=t.drawer,a=t.options;e.setState({grid:n.gridGap/a.pixelRatio,padding:5*n.gridGap/a.pixelRatio})};a(),this.wf.on("resize",(function(){a()})),this.wf.on("decodeing",(function(e){e&&e>=1&&p.a.success(Object(f.t)("waveformBuildEnd"))})),this.wf.load(n)}}},{key:"render",value:function(){return r.a.createElement(Ee,null,r.a.createElement(Oe,{ref:this.$waveform}),this.state.grid?r.a.createElement(ve,Object.assign({},this.props,this.state)):null)}}],[{key:"getDerivedStateFromProps",value:function(e){return{beginTime:10*Math.floor(e.currentTime/10)}}}]),t}(r.a.Component),je=n(134),Ce=n.n(je),Ae={baidu:{zh:[{name:"\u7b80\u4f53\u4e2d\u6587",key:"zh"},{name:"\u7e41\u4f53\u4e2d\u6587",key:"cht"},{name:"\u82f1\u8bed",key:"en"},{name:"\u7ca4\u8bed",key:"yue"},{name:"\u6587\u8a00\u6587",key:"wyw"},{name:"\u65e5\u8bed",key:"jp"},{name:"\u97e9\u8bed",key:"kor"},{name:"\u6cd5\u8bed",key:"fra"},{name:"\u897f\u73ed\u7259\u8bed",key:"spa"},{name:"\u6cf0\u8bed",key:"th"},{name:"\u963f\u62c9\u4f2f\u8bed",key:"ara"},{name:"\u4fc4\u8bed",key:"ru"},{name:"\u8461\u8404\u7259\u8bed",key:"pt"},{name:"\u5fb7\u8bed",key:"de"},{name:"\u610f\u5927\u5229\u8bed",key:"it"},{name:"\u5e0c\u814a\u8bed",key:"el"},{name:"\u8377\u5170\u8bed",key:"nl"},{name:"\u6ce2\u5170\u8bed",key:"pl"},{name:"\u4fdd\u52a0\u5229\u4e9a\u8bed",key:"bul"},{name:"\u7231\u6c99\u5c3c\u4e9a\u8bed",key:"est"},{name:"\u4e39\u9ea6\u8bed",key:"dan"},{name:"\u82ac\u5170\u8bed",key:"fin"},{name:"\u6377\u514b\u8bed",key:"cs"},{name:"\u7f57\u9a6c\u5c3c\u4e9a\u8bed",key:"rom"},{name:"\u65af\u6d1b\u6587\u5c3c\u4e9a\u8bed",key:"slo"},{name:"\u745e\u5178\u8bed",key:"swe"},{name:"\u5308\u7259\u5229\u8bed",key:"hu"},{name:"\u8d8a\u5357\u8bed",key:"vie"}],en:[{name:"Chinese Simplified",key:"zh"},{name:"Chinese Traditional",key:"cht"},{name:"English",key:"en"},{name:"Cantonese",key:"yue"},{name:"Classical Chinese",key:"wyw"},{name:"Japanese",key:"jp"},{name:"Korean",key:"kor"},{name:"French",key:"fra"},{name:"Spanish",key:"spa"},{name:"Thai",key:"th"},{name:"Arabic",key:"ara"},{name:"Russian",key:"ru"},{name:"Portuguese",key:"pt"},{name:"German",key:"de"},{name:"Italian",key:"it"},{name:"Greek",key:"el"},{name:"Dutch",key:"nl"},{name:"Polish",key:"pl"},{name:"Bulgarian",key:"bul"},{name:"Estonian",key:"est"},{name:"Danish",key:"dan"},{name:"Finnish",key:"fin"},{name:"Czech",key:"cs"},{name:"Romanian",key:"rom"},{name:"Slovenian",key:"slo"},{name:"Swedish",key:"swe"},{name:"Hungarian",key:"hu"},{name:"Vietnamese",key:"vie"}],es:[{name:"Chino (simplificado)",key:"zh"},{name:"Chinese (tradicional)",key:"cht"},{name:"Ingl\xe9s",key:"en"},{name:"Canton\xe9s",key:"yue"},{name:"Chino (cl\xe1sico)",key:"wyw"},{name:"Japon\xe9s",key:"jp"},{name:"Coreano",key:"kor"},{name:"Franc\xe9s",key:"fra"},{name:"Espa\xf1ol",key:"spa"},{name:"Tailand\xe9s",key:"th"},{name:"\xc1rabe",key:"ara"},{name:"Ruso",key:"ru"},{name:"Portugu\xe9s",key:"pt"},{name:"Alem\xe1n",key:"de"},{name:"Italiano",key:"it"},{name:"Griego",key:"el"},{name:"Holand\xe9s",key:"nl"},{name:"Polaco",key:"pl"},{name:"B\xfalgaro",key:"bul"},{name:"Estonio",key:"est"},{name:"Dan\xe9s",key:"dan"},{name:"Finland\xe9s",key:"fin"},{name:"Checo",key:"cs"},{name:"Rumano",key:"rom"},{name:"Esloveno",key:"slo"},{name:"Sueco",key:"swe"},{name:"H\xfangaro",key:"hu"},{name:"Vietnamita",key:"vie"}]},google:{zh:[{name:"\u7b80\u4f53\u4e2d\u6587",key:"zh"},{name:"\u7e41\u4f53\u4e2d\u6587",key:"zh-TW"},{name:"\u82f1\u8bed",key:"en"},{name:"\u5357\u975e\u8377\u5170\u8bed",key:"af"},{name:"\u963f\u5c14\u5df4\u5c3c\u4e9a\u8bed",key:"sq"},{name:"\u963f\u59c6\u54c8\u62c9\u8bed",key:"am"},{name:"\u963f\u62c9\u4f2f\u8bed",key:"ar"},{name:"\u4e9a\u7f8e\u5c3c\u4e9a\u8bed",key:"hy"},{name:"\u963f\u585e\u62dc\u7586\u8bed",key:"az"},{name:"\u5df4\u65af\u514b\u8bed",key:"eu"},{name:"\u767d\u4fc4\u7f57\u65af\u8bed",key:"be"},{name:"\u5b5f\u52a0\u62c9\u8bed",key:"bn"},{name:"\u6ce2\u65af\u5c3c\u4e9a\u8bed",key:"bs"},{name:"\u4fdd\u52a0\u5229\u4e9a\u8bed",key:"bg"},{name:"\u52a0\u6cf0\u7f57\u5c3c\u4e9a\u8bed",key:"ca"},{name:"\u5bbf\u52a1\u8bed",key:"ceb"},{name:"\u79d1\u897f\u5609\u8bed",key:"co"},{name:"\u514b\u7f57\u5730\u4e9a\u8bed",key:"hr"},{name:"\u6377\u514b\u8bed",key:"cs"},{name:"\u4e39\u9ea6\u8bed",key:"da"},{name:"\u8377\u5170\u8bed",key:"nl"},{name:"\u4e16\u754c\u8bed",key:"eo"},{name:"\u7231\u6c99\u5c3c\u4e9a\u8bed",key:"et"},{name:"\u82ac\u5170\u8bed",key:"fi"},{name:"\u6cd5\u8bed",key:"fr"},{name:"\u5f17\u91cc\u65af\u5170\u8bed",key:"fy"},{name:"\u52a0\u5229\u897f\u4e9a\u8bed",key:"gl"},{name:"\u683c\u9c81\u5409\u4e9a\u8bed",key:"ka"},{name:"\u5fb7\u8bed",key:"de"},{name:"\u5e0c\u814a\u8bed",key:"el"},{name:"\u53e4\u5409\u62c9\u7279\u8bed",key:"gu"},{name:"\u6d77\u5730\u514b\u91cc\u5965\u5c14\u8bed",key:"ht"},{name:"\u8c6a\u8428\u8bed",key:"ha"},{name:"\u590f\u5a01\u5937\u8bed",key:"haw"},{name:"\u5e0c\u4f2f\u6765\u8bed",key:"he"},{name:"\u5370\u5730\u8bed",key:"hi"},{name:"\u82d7\u8bed",key:"hmn"},{name:"\u5308\u7259\u5229\u8bed",key:"hu"},{name:"\u51b0\u5c9b\u8bed",key:"is"},{name:"\u4f0a\u535a\u8bed",key:"ig"},{name:"\u5370\u5ea6\u5c3c\u897f\u4e9a\u8bed",key:"id"},{name:"\u7231\u5c14\u5170\u8bed",key:"ga"},{name:"\u610f\u5927\u5229\u8bed",key:"it"},{name:"\u65e5\u8bed",key:"ja"},{name:"\u722a\u54c7\u8bed",key:"jw"},{name:"\u5361\u7eb3\u8fbe\u8bed",key:"kn"},{name:"\u54c8\u8428\u514b\u8bed",key:"kk"},{name:"\u9ad8\u68c9\u6587",key:"km"},{name:"\u97e9\u8bed",key:"ko"},{name:"\u5e93\u5c14\u5fb7\u8bed",key:"ku"},{name:"\u5409\u5c14\u5409\u65af\u8bed",key:"ky"},{name:"\u8001\u631d\u8bed",key:"lo"},{name:"\u62c9\u4e01\u6587",key:"la"},{name:"\u62c9\u8131\u7ef4\u4e9a\u8bed",key:"lv"},{name:"\u7acb\u9676\u5b9b\u8bed",key:"lt"},{name:"\u5362\u68ee\u5821\u8bed",key:"lb"},{name:"\u9a6c\u5176\u987f\u8bed",key:"mk"},{name:"\u9a6c\u5c14\u52a0\u4ec0\u8bed",key:"mg"},{name:"\u9a6c\u6765\u8bed",key:"ms"},{name:"\u9a6c\u62c9\u96c5\u62c9\u59c6\u6587",key:"ml"},{name:"\u9a6c\u8033\u4ed6\u8bed",key:"mt"},{name:"\u6bdb\u5229\u8bed",key:"mi"},{name:"\u9a6c\u62c9\u5730\u8bed",key:"mr"},{name:"\u8499\u53e4\u6587",key:"mn"},{name:"\u7f05\u7538\u8bed",key:"my"},{name:"\u5c3c\u6cca\u5c14\u8bed",key:"ne"},{name:"\u632a\u5a01\u8bed",key:"no"},{name:"\u5c3c\u6768\u624e\u8bed",key:"ny"},{name:"\u666e\u4ec0\u56fe\u8bed",key:"ps"},{name:"\u6ce2\u65af\u8bed",key:"fa"},{name:"\u6ce2\u5170\u8bed",key:"pl"},{name:"\u8461\u8404\u7259\u8bed",key:"pt"},{name:"\u65c1\u906e\u666e\u8bed",key:"pa"},{name:"\u7f57\u9a6c\u5c3c\u4e9a\u8bed",key:"ro"},{name:"\u4fc4\u8bed",key:"ru"},{name:"\u8428\u6469\u4e9a\u8bed",key:"sm"},{name:"\u82cf\u683c\u5170\u76d6\u5c14\u8bed",key:"gd"},{name:"\u585e\u5c14\u7ef4\u4e9a\u8bed",key:"sr"},{name:"\u585e\u7d22\u6258\u8bed",key:"st"},{name:"\u4fee\u7eb3\u8bed",key:"sn"},{name:"\u4fe1\u5fb7\u8bed",key:"sd"},{name:"\u50e7\u4f3d\u7f57\u8bed",key:"si"},{name:"\u65af\u6d1b\u4f10\u514b\u8bed",key:"sk"},{name:"\u65af\u6d1b\u6587\u5c3c\u4e9a\u8bed",key:"sl"},{name:"\u7d22\u9a6c\u91cc\u8bed",key:"so"},{name:"\u897f\u73ed\u7259\u8bed",key:"es"},{name:"\u5dfd\u4ed6\u8bed",key:"su"},{name:"\u65af\u74e6\u5e0c\u91cc\u8bed",key:"sw"},{name:"\u745e\u5178\u8bed",key:"sv"},{name:"\u5854\u52a0\u8def\u8bed",key:"tl"},{name:"\u5854\u5409\u514b\u8bed",key:"tg"},{name:"\u6cf0\u7c73\u5c14\u8bed",key:"ta"},{name:"\u6cf0\u5362\u56fa\u8bed",key:"te"},{name:"\u6cf0\u6587",key:"th"},{name:"\u571f\u8033\u5176\u8bed",key:"tr"},{name:"\u4e4c\u514b\u5170\u8bed",key:"uk"},{name:"\u4e4c\u5c14\u90fd\u8bed",key:"ur"},{name:"\u4e4c\u5179\u522b\u514b\u8bed",key:"uz"},{name:"\u8d8a\u5357\u8bed",key:"vi"},{name:"\u5a01\u5c14\u58eb\u8bed",key:"cy"},{name:"\u73ed\u56fe\u8bed",key:"xh"},{name:"\u610f\u7b2c\u7eea\u8bed",key:"yi"},{name:"\u7ea6\u9c81\u5df4\u8bed",key:"yo"},{name:"\u7956\u9c81\u8bed",key:"zu"}],en:[{name:"Chinese Simplified",key:"zh"},{name:"Chinese Traditional",key:"zh-TW"},{name:"English",key:"en"},{name:"Afrikaans",key:"af"},{name:"Albania",key:"sq"},{name:"Amharic",key:"am"},{name:"Arabic",key:"ar"},{name:"Armenian",key:"hy"},{name:"Azerbaijani",key:"az"},{name:"Basque",key:"eu"},{name:"Belarusian",key:"be"},{name:"Bengali",key:"bn"},{name:"Bosnia",key:"bs"},{name:"Bulgarian",key:"bg"},{name:"Catalan",key:"ca"},{name:"Cebu language",key:"ceb"},{name:"Corsican",key:"co"},{name:"Croatian",key:"hr"},{name:"Czech",key:"cs"},{name:"Danish",key:"da"},{name:"Dutch",key:"nl"},{name:"Esperanto",key:"eo"},{name:"Estonian",key:"et"},{name:"Finnish",key:"fi"},{name:"French",key:"fr"},{name:"Friesian",key:"fy"},{name:"Galician",key:"gl"},{name:"Georgian",key:"ka"},{name:"German",key:"de"},{name:"Greek",key:"el"},{name:"Gujarati",key:"gu"},{name:"Haiti Creole",key:"ht"},{name:"Hausa",key:"ha"},{name:"Hawaiian",key:"haw"},{name:"Hebrew",key:"he"},{name:"Hindi",key:"hi"},{name:"Hmong",key:"hmn"},{name:"Hungarian",key:"hu"},{name:"Icelandic",key:"is"},{name:"Ibo",key:"ig"},{name:"Indonesian",key:"id"},{name:"Irish",key:"ga"},{name:"Italian",key:"it"},{name:"Japanese",key:"ja"},{name:"Javanese",key:"jw"},{name:"Kannada",key:"kn"},{name:"Kazakh",key:"kk"},{name:"Khmer text",key:"km"},{name:"Korean",key:"ko"},{name:"Kurdish",key:"ku"},{name:"Kyrgyz",key:"ky"},{name:"Laotian",key:"lo"},{name:"Latin",key:"la"},{name:"Latvian",key:"lv"},{name:"Lithuania",key:"lt"},{name:"Luxembourg",key:"lb"},{name:"Macedonian",key:"mk"},{name:"Malagasy",key:"mg"},{name:"Malay",key:"ms"},{name:"Malayalam",key:"ml"},{name:"Malta",key:"mt"},{name:"Maori",key:"mi"},{name:"Marathi",key:"mr"},{name:"Mongolian",key:"mn"},{name:"Burmese",key:"my"},{name:"Nepalese",key:"ne"},{name:"Norwegian",key:"no"},{name:"Nyanza",key:"ny"},{name:"Pashto",key:"ps"},{name:"Persian",key:"fa"},{name:"Polish",key:"pl"},{name:"Portuguese",key:"pt"},{name:"Punjabi",key:"pa"},{name:"Romanian",key:"ro"},{name:"Russian",key:"ru"},{name:"Samoan",key:"sm"},{name:"Scottish Gaelic",key:"gd"},{name:"Serbian",key:"sr"},{name:"Sesotho",key:"st"},{name:"Shanna",key:"sn"},{name:"Sin German",key:"sd"},{name:"Sinhala",key:"si"},{name:"Slovakian",key:"sk"},{name:"Slovenian",key:"sl"},{name:"Somali",key:"so"},{name:"Spanish",key:"es"},{name:"Sundanese",key:"su"},{name:"Swahili",key:"sw"},{name:"Swedish",key:"sv"},{name:"Tagalogian",key:"tl"},{name:"Tajik",key:"tg"},{name:"Tamil",key:"ta"},{name:"Telugu",key:"te"},{name:"Thai",key:"th"},{name:"Turkish",key:"tr"},{name:"Ukrainian",key:"uk"},{name:"Urdu",key:"ur"},{name:"Uzbek",key:"uz"},{name:"Vietnamese",key:"vi"},{name:"Welsh",key:"cy"},{name:"bantu",key:"xh"},{name:"Yiddish",key:"yi"},{name:"Yoruba",key:"yo"},{name:"zulu",key:"zu"}],es:[{name:"Chino (simplificado)",key:"zh"},{name:"Chinese (tradicional)",key:"zh-TW"},{name:"Ingl\xe9s",key:"en"},{name:"Afrik\xe1ans",key:"af"},{name:"Alban\xe9s",key:"sq"},{name:"Am\xe1rico",key:"am"},{name:"\xc1rabe",key:"ar"},{name:"Armenio",key:"hy"},{name:"Azer\xed",key:"az"},{name:"Vasco",key:"eu"},{name:"Bielorruso",key:"be"},{name:"Bengal\xed",key:"bn"},{name:"Bosnio",key:"bs"},{name:"B\xfalgaro",key:"bg"},{name:"Catal\xe1n",key:"ca"},{name:"Cebuano",key:"ceb"},{name:"Corso",key:"co"},{name:"Croata",key:"hr"},{name:"Checo",key:"cs"},{name:"Dan\xe9s",key:"da"},{name:"Holand\xe9s",key:"nl"},{name:"Esperanto",key:"eo"},{name:"Estonio",key:"et"},{name:"Finland\xe9s",key:"fi"},{name:"Franc\xe9s",key:"fr"},{name:"Fris\xf3n",key:"fy"},{name:"Gallego",key:"gl"},{name:"Georgiano",key:"ka"},{name:"Alem\xe1n",key:"de"},{name:"Griego",key:"el"},{name:"Guyarat\xed",key:"gu"},{name:"Criollo haitiano",key:"ht"},{name:"Hausa",key:"ha"},{name:"Hawaiano",key:"haw"},{name:"Hebreo",key:"he"},{name:"Hindi",key:"hi"},{name:"Hmong",key:"hmn"},{name:"H\xfangaro",key:"hu"},{name:"Island\xe9s",key:"is"},{name:"Igbo",key:"ig"},{name:"Indonesio",key:"id"},{name:"Irland\xe9s",key:"ga"},{name:"Italiano",key:"it"},{name:"Japon\xe9s",key:"ja"},{name:"Javan\xe9s",key:"jw"},{name:"Canar\xe9s",key:"kn"},{name:"Kazajo",key:"kk"},{name:"Jemer",key:"km"},{name:"Coreano",key:"ko"},{name:"Kurdo",key:"ku"},{name:"Kirgu\xeds",key:"ky"},{name:"Laosiano",key:"lo"},{name:"Lat\xedn",key:"la"},{name:"Let\xf3nn",key:"lv"},{name:"Lituano",key:"lt"},{name:"Luxemburgu\xe9s",key:"lb"},{name:"Macedonio",key:"mk"},{name:"Malgache",key:"mg"},{name:"Malayo",key:"ms"},{name:"Malabar",key:"ml"},{name:"Malt\xe9s",key:"mt"},{name:"Maor\xed",key:"mi"},{name:"Marat\xed",key:"mr"},{name:"Mongol",key:"mn"},{name:"Birmano",key:"my"},{name:"Nepal\xed",key:"ne"},{name:"Noruego",key:"no"},{name:"Nyanza (Chichewa)",key:"ny"},{name:"Past\xfan",key:"ps"},{name:"Persa",key:"fa"},{name:"Polaco",key:"pl"},{name:"Portugu\xe9s",key:"pt"},{name:"Punyab\xed",key:"pa"},{name:"Rumano",key:"ro"},{name:"Espa\xf1ol",key:"es"},{name:"Ruso",key:"ru"},{name:"Samoano",key:"sm"},{name:"Ga\xe9lico escoc\xe9s",key:"gd"},{name:"Serbio",key:"sr"},{name:"Sesoto",key:"st"},{name:"Shona",key:"sn"},{name:"Sindhi",key:"sd"},{name:"Cingal\xe9s",key:"si"},{name:"Eslovaco",key:"sk"},{name:"Esloveno",key:"sl"},{name:"Somal\xed",key:"so"},{name:"Sudan\xe9s",key:"su"},{name:"Suajili",key:"sw"},{name:"Sueco",key:"sv"},{name:"Tagalo (filipino)",key:"tl"},{name:"Tayiko",key:"tg"},{name:"Tamil",key:"ta"},{name:"Telugu",key:"te"},{name:"Tailand\xe9s",key:"th"},{name:"Turco",key:"tr"},{name:"Ucrainiano",key:"uk"},{name:"Urdu",key:"ur"},{name:"Uzbeko",key:"uz"},{name:"Vietnamita",key:"vi"},{name:"Gal\xe9s",key:"cy"},{name:"Xhosa",key:"xh"},{name:"Yiddish",key:"yi"},{name:"Yoruba",key:"yo"},{name:"Zul\xfa",key:"zu"}]}};function Me(){var e=Object(h.a)(["\n    height: 25px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(46, 54, 60);\n"]);return Me=function(){return e},e}function Pe(){var e=Object(h.a)(["\n    height: 25px;\n    border: none;\n    padding: 0 10px;\n    outline: none;\n    cursor: pointer;\n    border-radius: 2px;\n    font-size: 13px;\n    margin: 0 10px 10px 0;\n    color: #ccc;\n    background-color: rgb(46, 54, 60);\n    transition: all 0.2s ease;\n\n    &:hover {\n        color: #fff;\n        background-color: rgb(66, 82, 95);\n    }\n\n    i {\n        margin-right: 5px;\n    }\n"]);return Pe=function(){return e},e}function ze(){var e=Object(h.a)(["\n    flex: 1;\n    padding: 10px;\n"]);return ze=function(){return e},e}var Ue=y.b.div(ze()),Re=y.b.button(Pe()),De=y.b.select(Me()),Ne=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={lang:"en",translator:"google",translators:{zh:[{name:"\u8c37\u6b4c\u7ffb\u8bd1",key:"google"},{name:"\u767e\u5ea6\u7ffb\u8bd1",key:"baidu"}],en:[{name:"Google Translate",key:"google"},{name:"Baidu Translate",key:"baidu"}],es:[{name:"Traductor de google",key:"google"},{name:"Traductor de baidu",key:"baidu"}]},languages:Ae},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.lang,a=t.subtitles,i=t.overallOffset,o=t.insertSubtitle,s=t.timeOffset,l=t.undoSubtitle,u=t.removeAllSubtitle,c=t.removeEmptySubtitle,m=t.removeCache,d=t.translate,h=t.overallOffsetSwitch;return r.a.createElement(Ue,null,r.a.createElement(Re,{onClick:function(){return o(a.length)}},r.a.createElement("i",{className:"icon-doc-new"}),r.a.createElement(f.Translate,{value:"btnAddSubtitle"})),r.a.createElement(Re,{onClick:function(){return s(-.1)}},r.a.createElement("i",{className:"icon-minus"}),r.a.createElement(f.Translate,{value:"btnTimeOffsetMinus"})),r.a.createElement(Re,{onClick:function(){return s(.1)}},r.a.createElement("i",{className:"icon-plus"}),r.a.createElement(f.Translate,{value:"btnTimeOffsetPlus"})),r.a.createElement(Re,{onClick:function(){return l()}},r.a.createElement("i",{className:"icon-ccw"}),r.a.createElement(f.Translate,{value:"btnUndo"})),r.a.createElement("div",null),r.a.createElement(Re,{onClick:function(){return u()}},r.a.createElement("i",{className:"icon-trash-empty"}),r.a.createElement(f.Translate,{value:"btnRemoveAll"})),r.a.createElement(Re,{onClick:function(){return c()}},r.a.createElement("i",{className:"icon-trash-empty"}),r.a.createElement(f.Translate,{value:"btnRemoveEmpty"})),r.a.createElement(Re,{onClick:function(){return m()}},r.a.createElement("i",{className:"icon-trash-empty"}),r.a.createElement(f.Translate,{value:"btnRemoveCache"})),r.a.createElement("div",null),r.a.createElement(Re,{onClick:function(){return d(e.state.lang,e.state.translator)}},r.a.createElement("i",{className:"icon-language"}),r.a.createElement(f.Translate,{value:"btnBatchTranslate"})),r.a.createElement("span",{style:{marginRight:10}},r.a.createElement(f.Translate,{value:"use"})),r.a.createElement(De,{value:this.state.translator,onChange:function(t){e.setState({lang:"en",translator:t.target.value})}},this.state.translators[n].map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.name)}))),r.a.createElement("span",{style:{marginRight:10}},r.a.createElement(f.Translate,{value:"to"})),r.a.createElement(De,{value:this.state.lang,onChange:function(t){e.setState({lang:t.target.value})}},this.state.languages[this.state.translator][n].map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.name)}))),r.a.createElement("div",null),r.a.createElement(Re,{onClick:function(){return h()}},r.a.createElement("i",{className:"icon-switch"}),r.a.createElement(f.Translate,{value:"btnOverallOffset"}),":"," ",i?r.a.createElement(f.Translate,{value:"on"}):r.a.createElement(f.Translate,{value:"off"})))}}]),t}(r.a.Component);function Le(){var e=Object(h.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 70%;\n    padding: 10px;\n    border-bottom: 1px solid rgb(10, 10, 10);\n\n    .artplayer-video-player .artplayer-subtitle {\n        bottom: 50px;\n        background-color: rgba(0, 0, 0, 0.5);\n    }\n"]);return Le=function(){return e},e}function Ie(){var e=Object(h.a)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n"]);return Ie=function(){return e},e}var $e=y.b.div(Ie()),Be=y.b.div(Le()),Ve=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={art:null},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.videoUrl,a=t.subtitleUrl,i=t.updateCurrentTime,o=t.getArt;return r.a.createElement($e,null,r.a.createElement(Be,null,n?r.a.createElement(Ce.a,{style:{width:"100%",height:"100%"},option:{url:n,loop:!0,lang:"en",autoSize:!0,subtitle:{url:a},moreVideoAttr:{crossOrigin:"anonymous"}},getInstance:function(t){!function e(){window.requestAnimationFrame((function(){t.playing&&i(t.currentTime),e()}))}(),t.on("ready",(function(){setTimeout((function(){t.player.seek=1}),1e3)})),t.on("seek",(function(){i(t.currentTime)})),e.setState({art:t}),o(t)}}):null),r.a.createElement(Ne,this.props))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(t.art){var n=t.art.template.$video,a=t.art.template.$track,r=n.src,i=a?a.src:"";if(e.videoUrl!==r){var o=document.querySelector(".uploadVideo").files[0];t.art.player.switchUrl(e.videoUrl,o?o.name:""),URL.revokeObjectURL(r)}e.subtitleUrl!==i&&(t.art.subtitle.init(e.subtitleUrl),URL.revokeObjectURL(i))}return null}}]),t}(r.a.Component),He=n(135),Fe=n.n(He),We=n(136),_e=n.n(We);function Ge(e,t){return new Promise((function(n){var a="20190926000337502",r=Date.now(),i=new URL("https://fanyi-api.baidu.com/api/trans/vip/translate");i.searchParams.append("q",e),i.searchParams.append("appid",a),i.searchParams.append("salt",r),i.searchParams.append("from","auto"),i.searchParams.append("to",t),i.searchParams.append("sign",function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,a,r,i,o;return r=2147483648&e,i=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(a=1073741824&t)?2147483648^o^r^i:n|a?1073741824&o?3221225472^o^r^i:1073741824^o^r^i:o^r^i}function a(e,a,r,i,o,s,l){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(a,r,i),o),l)),n(t(e,s),a)}function r(e,a,r,i,o,s,l){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(a,r,i),o),l)),n(t(e,s),a)}function i(e,a,r,i,o,s,l){return e=n(e,n(n(function(e,t,n){return e^t^n}(a,r,i),o),l)),n(t(e,s),a)}function o(e,a,r,i,o,s,l){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(a,r,i),o),l)),n(t(e,s),a)}function s(e){var t,n="",a="";for(t=0;t<=3;t++)n+=(a="0"+(e>>>8*t&255).toString(16)).substr(a.length-2,2);return n}var l,u,c,m,d,h,y,f,b,p;for(l=function(e){for(var t,n=e.length,a=n+8,r=16*((a-a%64)/64+1),i=Array(r-1),o=0,s=0;s<n;)o=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<o,i[r-2]=n<<3,i[r-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e)),y=1732584193,f=4023233417,b=2562383102,p=271733878,u=0;u<l.length;u+=16)c=y,m=f,d=b,h=p,y=a(y,f,b,p,l[u+0],7,3614090360),p=a(p,y,f,b,l[u+1],12,3905402710),b=a(b,p,y,f,l[u+2],17,606105819),f=a(f,b,p,y,l[u+3],22,3250441966),y=a(y,f,b,p,l[u+4],7,4118548399),p=a(p,y,f,b,l[u+5],12,1200080426),b=a(b,p,y,f,l[u+6],17,2821735955),f=a(f,b,p,y,l[u+7],22,4249261313),y=a(y,f,b,p,l[u+8],7,1770035416),p=a(p,y,f,b,l[u+9],12,2336552879),b=a(b,p,y,f,l[u+10],17,4294925233),f=a(f,b,p,y,l[u+11],22,2304563134),y=a(y,f,b,p,l[u+12],7,1804603682),p=a(p,y,f,b,l[u+13],12,4254626195),b=a(b,p,y,f,l[u+14],17,2792965006),y=r(y,f=a(f,b,p,y,l[u+15],22,1236535329),b,p,l[u+1],5,4129170786),p=r(p,y,f,b,l[u+6],9,3225465664),b=r(b,p,y,f,l[u+11],14,643717713),f=r(f,b,p,y,l[u+0],20,3921069994),y=r(y,f,b,p,l[u+5],5,3593408605),p=r(p,y,f,b,l[u+10],9,38016083),b=r(b,p,y,f,l[u+15],14,3634488961),f=r(f,b,p,y,l[u+4],20,3889429448),y=r(y,f,b,p,l[u+9],5,568446438),p=r(p,y,f,b,l[u+14],9,3275163606),b=r(b,p,y,f,l[u+3],14,4107603335),f=r(f,b,p,y,l[u+8],20,1163531501),y=r(y,f,b,p,l[u+13],5,2850285829),p=r(p,y,f,b,l[u+2],9,4243563512),b=r(b,p,y,f,l[u+7],14,1735328473),y=i(y,f=r(f,b,p,y,l[u+12],20,2368359562),b,p,l[u+5],4,4294588738),p=i(p,y,f,b,l[u+8],11,2272392833),b=i(b,p,y,f,l[u+11],16,1839030562),f=i(f,b,p,y,l[u+14],23,4259657740),y=i(y,f,b,p,l[u+1],4,2763975236),p=i(p,y,f,b,l[u+4],11,1272893353),b=i(b,p,y,f,l[u+7],16,4139469664),f=i(f,b,p,y,l[u+10],23,3200236656),y=i(y,f,b,p,l[u+13],4,681279174),p=i(p,y,f,b,l[u+0],11,3936430074),b=i(b,p,y,f,l[u+3],16,3572445317),f=i(f,b,p,y,l[u+6],23,76029189),y=i(y,f,b,p,l[u+9],4,3654602809),p=i(p,y,f,b,l[u+12],11,3873151461),b=i(b,p,y,f,l[u+15],16,530742520),y=o(y,f=i(f,b,p,y,l[u+2],23,3299628645),b,p,l[u+0],6,4096336452),p=o(p,y,f,b,l[u+7],10,1126891415),b=o(b,p,y,f,l[u+14],15,2878612391),f=o(f,b,p,y,l[u+5],21,4237533241),y=o(y,f,b,p,l[u+12],6,1700485571),p=o(p,y,f,b,l[u+3],10,2399980690),b=o(b,p,y,f,l[u+10],15,4293915773),f=o(f,b,p,y,l[u+1],21,2240044497),y=o(y,f,b,p,l[u+8],6,1873313359),p=o(p,y,f,b,l[u+15],10,4264355552),b=o(b,p,y,f,l[u+6],15,2734768916),f=o(f,b,p,y,l[u+13],21,1309151649),y=o(y,f,b,p,l[u+4],6,4149444226),p=o(p,y,f,b,l[u+11],10,3174756917),b=o(b,p,y,f,l[u+2],15,718787259),f=o(f,b,p,y,l[u+9],21,3951481745),y=n(y,c),f=n(f,m),b=n(b,d),p=n(p,h);return(s(y)+s(f)+s(b)+s(p)).toLowerCase()}(a+e+r+"AyDT0yVJk43C8mgzspBY")),M().then(Object(S.a)(w.a.mark((function e(){var t,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe()(i.href);case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).error_code?(p.a.error(a.error_msg),n("")):a.trans_result?n(a.trans_result.map((function(e){return e.dst})).join("\n").trim()):n(""),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),p.a.error(e.t0.message),n("");case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))))}))}function qe(e,t){var n=new URL("https://translate.googleapis.com/translate_a/single");return n.searchParams.append("client","gtx"),n.searchParams.append("sl","auto"),n.searchParams.append("dt","t"),n.searchParams.append("tl",t),n.searchParams.append("q",e),new Promise((function(e){M().then(Object(S.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch(n.href).then((function(e){return e.json()})).then((function(t){e(t?t[0].map((function(e){return e[0].trim()})).join("\n"):"")})).catch((function(t){p.a.error(t.message),e("")}));case 1:case"end":return t.stop()}}),t)}))))}))}function Je(){return(Je=Object(S.a)(w.a.mark((function e(t,n){var a,r,i,o,s,l=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:"google",v.a.start(),r=_e()(1),i=0,o={baidu:Ge,google:qe}[a],e.prev=5,e.next=8,Promise.all(t.map((function(e){return r(Object(S.a)(w.a.mark((function a(){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o(e.text,n);case 2:return r=a.sent,v.a.set(++i/t.length),r&&(e.text=r),a.abrupt("return",e);case 6:case"end":return a.stop()}}),a)}))))})));case 8:return s=e.sent,v.a.done(),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),v.a.done(),p.a.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}var Ye=function(){function e(){Object(l.a)(this,e),this.name="subplayer_settings"}return Object(u.a)(e,[{key:"get",value:function(e){var t=JSON.parse(window.localStorage.getItem(this.name))||{};return e?t[e]:t}},{key:"set",value:function(e,t){var n=Object.assign({},this.get(),Object(s.a)({},e,t));window.localStorage.setItem(this.name,JSON.stringify(n))}},{key:"del",value:function(e){var t=this.get();delete t[e],window.localStorage.setItem(this.name,JSON.stringify(t))}},{key:"clean",value:function(){window.localStorage.removeItem(this.name)}}]),e}();function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xe(){var e=Object(h.a)(["\n    position: relative;\n    display: flex;\n    flex: 1;\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(h.a)(["\n    html,\n    body,\n    #root {\n        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;\n        line-height: 1.5;\n        height: 100%;\n        overflow: hidden;\n    }\n\n    *, *::before, *::after {\n        box-sizing: border-box;\n    }\n\n    #root {\n        display: flex;\n        flex-direction: column;\n        font-size: 14px;\n        color: #ccc;\n        background: rgb(28,32,26);\n    }\n\n    #toast-container.toast-top-right {\n        top: 60px;\n\n        & > div {\n            box-shadow: none;\n        }\n    }\n\n    #nprogress .bar {\n        top: 50px !important;\n\n        .peg {\n            display: none !important;\n        }\n    }\n\n    ::-webkit-scrollbar {\n        width: 10px;\n    }\n    \n    ::-webkit-scrollbar-thumb {\n        background-color: #666;\n    }\n    \n    ::-webkit-scrollbar-thumb:hover {\n        background-color: #ccc;\n    }\n"]);return Ze=function(){return e},e}var Qe=Object(y.a)(Ze()),et=y.b.div(Xe()),tt=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).vttToUrl=new Worker(URL.createObjectURL(new Blob(["onmessage = event => {\n                postMessage(URL.createObjectURL(\n                    new Blob([\n                        `WEBVTT\n\n                        ${event.data.map((item, index) => `\n                        ${index + 1}\n                        ${item.start} --\x3e ${item.end}\n                        ${item.text}`).join('\\n\\n')}\n                        `\n                    ], {\n                        type: 'text/vtt',\n                    }),\n                ))\n            }"]))),n.storage=new Ye,n.inTranslation=!1,n.history=[],n.state={art:null,lang:"en",mainHeight:100,mainWidth:100,videoUrl:"",subtitleUrl:"",currentTime:0,currentIndex:-1,overallOffset:!1,subtitles:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setLocale(this.storage.get("lang")||"en");var t=function(){e.setState({mainHeight:document.body.clientHeight-200,mainWidth:document.body.clientWidth})},n=function(e,t,n){var a;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=function(){a=null,e.apply(n,i)};clearTimeout(a),a=setTimeout(s,t)}}((function(){t()}),500);t(),window.addEventListener("resize",n);var a=B("subtitle")||"https://zhw2590582.github.io/assets-cdn/subtitle/fullmetal-alchemist-again.vtt",r=B("video")||"https://zhw2590582.github.io/assets-cdn/video/fullmetal-alchemist-again.mp4",i=this.storage.get("subtitles");i?R(D(N(i))).then((function(t){e.updateSubtitles(t,!0).then((function(){e.updateVideoUrl(r)}))})).catch((function(e){throw p.a.error(e.message),e})):function(e){return I.apply(this,arguments)}(a).then((function(t){R(D(t)).then((function(t){e.updateSubtitles(t,!0).then((function(){e.updateVideoUrl(r)}))})).catch((function(e){throw p.a.error(e.message),e}))})).catch((function(e){throw p.a.error(e.message),e}));this.vttToUrl.onmessage=function(t){e.updateSubtitleUrl(t.data)}}},{key:"checkSub",value:function(e){return this.state.subtitles.includes(e)}},{key:"checkSubtitleIllegal",value:function(e){var t=this.state.subtitles,n=t.indexOf(e),a=t[n-1];return a&&e.startTime<a.endTime||!e.check}},{key:"getArt",value:function(e){this.setState({art:e})}},{key:"removeSubtitle",value:function(e){if(this.checkSub(e)){var t=this.state.subtitles,n=t.indexOf(e);t.splice(n,1),this.updateSubtitles(t,!0).then((function(){p.a.success(Object(f.t)("delete"))}))}}},{key:"editSubtitle",value:function(e){var t=this;if(this.checkSub(e)){var n=this.state.subtitles.map((function(e){return e.highlight=!1,e.editing=!1,e}));e.editing=!0,this.updateSubtitles(n).then((function(){t.videoSeek(e)}))}}},{key:"videoSeek",value:function(e,t){var n=this.state.art;if(null!==n){var a=e.startTime+.001;!n.playing&&a>0&&a!==n.currentTime&&n.duration&&(a<=n.duration?M(300).then((function(){n.seek=a,t&&(n.play=!0)})):p.a.warning(Object(f.t)("durationLimit")))}}},{key:"highlightSubtitle",value:function(e){if(this.checkSub(e)){var t=this.state.subtitles.map((function(e){return e.highlight=!1,e}));e.highlight=!0,this.updateSubtitles(t)}}},{key:"updateSubtitle",value:function(e,t){var n=this,a=this.state.subtitles.map((function(e){return e.highlight=!1,e.editing=!1,e}));a[e]=t,this.updateSubtitles(a,!0).then((function(){p.a.success(Object(f.t)("update")),n.updateCurrentIndex(t)}))}},{key:"insertSubtitle",value:function(e){var t=this,n=this.state.subtitles.map((function(e){return e.highlight=!1,e.editing=!1,e})),a=n[e-1],r=a?z(a.endTime+.001):"00:00:00.001",i=a?z(a.endTime+1.001):"00:00:01.001",o=Object(f.t)("your"),s=new j(r,i,o);s.highlight=!0,n.splice(e,0,s),this.updateSubtitles(n,!0).then((function(){p.a.success(Object(f.t)("add")),t.updateCurrentIndex(s)}))}},{key:"mergeSubtitle",value:function(e){var t=this;if(this.checkSub(e)){var n=this.state.subtitles,a=n.indexOf(e),r=n[a],i=n[a+1];if(i){var o=new j(r.start,i.end,r.text+"\n"+i.text);o.highlight=!0,n[a]=o,n.splice(a+1,1),this.updateSubtitles(n,!0).then((function(){p.a.success(Object(f.t)("merge")),t.updateCurrentIndex(e)}))}}}},{key:"updateVideoUrl",value:function(e){this.setState({videoUrl:e})}},{key:"updateSubtitleUrl",value:function(e){this.setState({subtitleUrl:e})}},{key:"updateSubtitles",value:function(e,t,n){var a=this;return new Promise((function(r){a.setState({subtitles:e},(function(){var e=a.state.subtitles;t&&(a.vttToUrl.postMessage(e),n||(a.history.length>=100&&a.history.shift(),a.history.push(e.map((function(e){return e.clone})))),a.storage.set("subtitles",e.map((function(e){return{start:e.start,end:e.end,text:e.text}})))),r(e)}))}))}},{key:"updateCurrentTime",value:function(e){var t=this,n=this.state.subtitles.findIndex((function(t){return t.startTime<=e&&t.endTime>=e}));this.setState({currentTime:e},(function(){var e=t.state.subtitles[n];t.highlightSubtitle(e),t.updateCurrentIndex(e)}))}},{key:"updateCurrentIndex",value:function(e){if(this.checkSub(e)){var t=this.state.subtitles.indexOf(e);this.setState({currentIndex:t})}}},{key:"downloadSubtitles",value:function(){!function(e,t){var n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(D(N(this.state.subtitles)),"".concat(Date.now(),".vtt")),p.a.success(Object(f.t)("download"))}},{key:"removeEmptySubtitle",value:function(){var e=this.state.subtitles.filter((function(e){return e.text.trim()}));this.updateSubtitles(e,!0).then((function(){p.a.success(Object(f.t)("removeEmpty"))}))}},{key:"removeAllSubtitle",value:function(){this.updateSubtitles([],!0).then((function(){p.a.success(Object(f.t)("removeAll"))}))}},{key:"timeOffset",value:function(e){var t=this.state.subtitles.map((function(t){return t.highlight=!1,t.editing=!1,t.start=z(P(t.startTime+e,0,1/0)),t.end=z(P(t.endTime+e,0,1/0)),t}));this.updateSubtitles(t,!0).then((function(){p.a.success("".concat(Object(f.t)("offset"),": ").concat(e,"s"))}))}},{key:"translate",value:function(e,t){var n=this;this.inTranslation?p.a.error(Object(f.t)("translateProgress")):this.state.subtitles.length<=1e3?(this.inTranslation=!0,function(e,t){return Je.apply(this,arguments)}(this.state.subtitles,e,t).then((function(e){n.inTranslation=!1,n.updateSubtitles(e,!0).then((function(){p.a.success(Object(f.t)("translate"))}))})).catch((function(e){throw p.a.error(e.message),n.inTranslation=!1,e}))):p.a.error(Object(f.t)("translateLenght"))}},{key:"removeCache",value:function(){this.storage.del("subtitles"),window.location.reload()}},{key:"undoSubtitle",value:function(){this.history.pop();var e=this.history[this.history.length-1];e?this.updateSubtitles(e,!0,!0).then((function(){p.a.success(Object(f.t)("history"))})):p.a.warning(Object(f.t)("historyEmpty"))}},{key:"setLocale",value:function(e){var t=this;this.setState({lang:e},(function(){Object(f.setLocale)(e),t.storage.set("lang",e)}))}},{key:"overallOffsetSwitch",value:function(){this.setState({overallOffset:!this.state.overallOffset})}},{key:"getLocale",value:function(){return this.storage.get("lang")}},{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state,{getLocale:this.getLocale.bind(this),checkSubtitleIllegal:this.checkSubtitleIllegal.bind(this),removeSubtitle:this.removeSubtitle.bind(this),editSubtitle:this.editSubtitle.bind(this),highlightSubtitle:this.highlightSubtitle.bind(this),updateSubtitle:this.updateSubtitle.bind(this),updateSubtitles:this.updateSubtitles.bind(this),updateVideoUrl:this.updateVideoUrl.bind(this),updateSubtitleUrl:this.updateSubtitleUrl.bind(this),updateCurrentTime:this.updateCurrentTime.bind(this),updateCurrentIndex:this.updateCurrentIndex.bind(this),downloadSubtitles:this.downloadSubtitles.bind(this),removeEmptySubtitle:this.removeEmptySubtitle.bind(this),removeAllSubtitle:this.removeAllSubtitle.bind(this),mergeSubtitle:this.mergeSubtitle.bind(this),insertSubtitle:this.insertSubtitle.bind(this),overallOffsetSwitch:this.overallOffsetSwitch.bind(this),videoSeek:this.videoSeek.bind(this),timeOffset:this.timeOffset.bind(this),translate:this.translate.bind(this),removeCache:this.removeCache.bind(this),undoSubtitle:this.undoSubtitle.bind(this),setLocale:this.setLocale.bind(this),getArt:this.getArt.bind(this)});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe,null),r.a.createElement(ee,e),r.a.createElement(et,null,r.a.createElement(re,e),r.a.createElement(Ve,e)),r.a.createElement(Te,e))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(230),n(231),n(232),n(233),n(234),n(235);Object(f.setTranslations)({en:{access:"Please use a computer to access",delete:"Delete a subtitle",update:"Update a subtitle",add:"Add a subtitle",merge:"merge two subtitle",your:"Your Subtitle Text",download:"Download vtt subtitle",removeEmpty:"Remove empty subtitle",removeAll:"Remove all subtitle",offset:"Time offset",translate:"Translate subtitles",translateLenght:"Currently translates up to 1000 subtitles at a time",translateProgress:"Translation is in progress...",history:"History rollback",historyEmpty:"History is empty",description:"A Online Subtitle Editor: vtt\u3001srt\u3001ass",uploadSubtitle:"Open subtitle file",uploadSubtitleErr:"Only the following subtitle are supported: vtt\u3001srt\u3001ass",uploadVideo:"Open video file",uploadVideoErr:"This video format is not supported",btnUploadSubtitle:"Open Subtitle",btnUploadVideo:"Open Video",btnDownloadSubtitle:"Download Subtitle",startTime:"Start time format needs to match like: [00:00:00.000]",endTime:"End time format needs to match like: [00:00:00.000]",greater:"Start time cannot be greater than or equal to the end time",overlaps:"This time overlaps with the time of the previous one",start:"Start",end:"End",duration:"Duration",text:"Text",operation:"Operation",durationLimit:"Set the time longer than the video duration",btnAddSubtitle:"Add Subtitle",btnTimeOffsetMinus:"Time Offset -100ms",btnTimeOffsetPlus:"Time Offset +100ms",btnUndo:"Undo",btnRemoveAll:"Remove All Subtitle",btnRemoveEmpty:"Remove Empty Subtitle",btnRemoveCache:"Remove Cache",btnBatchTranslate:"Batch Translate",to:"To",use:"Use",btnOverallOffset:"Timeline overall offset",on:"On",off:"Off",moveInvalid:"Subtitle parameters are invalid, please try again",moveAcross:"Can't move across subtitles, please try again",deleteLine:"Delete line",insertBefore:"Insert before",insertAfter:"Insert after",mergeNext:"Merge with next",waveformBuildEnd:"The waveform generation succeeded"},zh:{access:"\u8bf7\u4f7f\u7528\u7535\u8111\u8bbf\u95ee",delete:"\u5220\u9664\u4e00\u4e2a\u5b57\u5e55",update:"\u66f4\u65b0\u4e00\u4e2a\u5b57\u5e55",add:"\u6dfb\u52a0\u4e00\u4e2a\u5b57\u5e55",merge:"\u5408\u5e76\u4e24\u4e2a\u5b57\u5e55",your:"\u4f60\u7684\u5b57\u5e55\u6587\u672c",download:"\u4e0b\u8f7d VTT \u5b57\u5e55",removeEmpty:"\u5220\u9664\u7a7a\u7684\u5b57\u5e55",removeAll:"\u5220\u9664\u5168\u90e8\u5b57\u5e55",offset:"\u65f6\u95f4\u504f\u79fb",translate:"\u7ffb\u8bd1\u5b57\u5e55",translateLenght:"\u5f53\u524d\u6bcf\u6b21\u6700\u5927\u53ea\u80fd\u7ffb\u8bd11000\u6761\u5b57\u5e55",translateProgress:"\u5b57\u5e55\u7ffb\u8bd1\u6b63\u5728\u8fdb\u884c\u4e2d...",history:"\u5386\u53f2\u56de\u6eda",historyEmpty:"\u5386\u53f2\u4e3a\u7a7a",description:"\u4e00\u4e2a\u5728\u7ebf\u5b57\u5e55\u7f16\u8f91\u5668\uff1avtt\u3001srt\u3001ass",uploadSubtitle:"\u6253\u5f00\u5b57\u5e55\u6587\u4ef6",uploadSubtitleErr:"\u5f53\u524d\u53ea\u652f\u6301\u4e00\u4e0b\u5b57\u5e55: vtt\u3001srt\u3001ass",uploadVideo:"\u6253\u5f00\u89c6\u9891\u6587\u4ef6",uploadVideoErr:"\u8be5\u89c6\u9891\u683c\u5f0f\u4e0d\u652f\u6301",btnUploadSubtitle:"\u6253\u5f00\u5b57\u5e55",btnUploadVideo:"\u6253\u5f00\u89c6\u9891",btnDownloadSubtitle:"\u4e0b\u8f7d\u5b57\u5e55",startTime:"\u5f00\u59cb\u65f6\u95f4\u7684\u683c\u5f0f\u9700\u8981\u7c7b\u4f3c: [00:00:00.000]",endTime:"\u7ed3\u675f\u65f6\u95f4\u7684\u683c\u5f0f\u9700\u8981\u7c7b\u4f3c: [00:00:00.000]",greater:"\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4",overlaps:"\u8fd9\u4e2a\u65f6\u95f4\u4e0e\u4e0a\u4e00\u6761\u5b57\u5e55\u65f6\u95f4\u91cd\u53e0",start:"\u5f00\u59cb",end:"\u7ed3\u675f",duration:"\u65f6\u957f",text:"\u6587\u672c",operation:"\u64cd\u4f5c",durationLimit:"\u8bbe\u7f6e\u65f6\u95f4\u5927\u4e8e\u89c6\u9891\u7684\u65f6\u957f",btnAddSubtitle:"\u6dfb\u52a0\u5b57\u5e55",btnTimeOffsetMinus:"\u65f6\u95f4\u504f\u79fb -100 \u6beb\u79d2",btnTimeOffsetPlus:"\u65f6\u95f4\u504f\u79fb +100\u6beb\u79d2",btnUndo:"\u56de\u6eda",btnRemoveAll:"\u5220\u9664\u5168\u90e8\u5b57\u5e55",btnRemoveEmpty:"\u5220\u9664\u7a7a\u7684\u5b57\u5e55",btnRemoveCache:"\u5220\u9664\u7f13\u5b58",btnBatchTranslate:"\u6279\u91cf\u7ffb\u8bd1",to:"\u5230",use:"\u4f7f\u7528",btnOverallOffset:"\u65f6\u95f4\u8f74\u6574\u4f53\u504f\u79fb",on:"\u5f00",off:"\u5173",moveInvalid:"\u5b57\u5e55\u53c2\u6570\u4e0d\u5408\u6cd5\uff0c\u8bf7\u91cd\u8bd5",moveAcross:"\u4e0d\u80fd\u8de8\u5b57\u5e55\u79fb\u52a8\uff0c\u8bf7\u91cd\u8bd5",deleteLine:"\u5220\u9664\u5b57\u5e55",insertBefore:"\u4e4b\u524d\u63d2\u5165",insertAfter:"\u4e4b\u540e\u63d2\u5165",mergeNext:"\u5408\u5e76\u4e0b\u6761",waveformBuildEnd:"\u6ce2\u5f62\u56fe\u751f\u6210\u6210\u529f"},es:{access:"Por favor, use un ordenador para acceder",delete:"Subt\xedtulo borrado",update:"Subt\xedtulo actualizado",add:"Subt\xedtulo a\xf1adido",merge:"Subt\xedtulos unidos",your:"Introduce aqu\xed el texto de tu subt\xedtulo",download:"Subt\xedtulo vtt descargado",removeEmpty:"Subt\xedtulos vac\xedos borrados",removeAll:"Todos los subt\xedtulos borrados",offset:"Mover",translate:"Traducir subt\xedtulos",translateLenght:"Actualmente traduce m\xe1s de 1000 subt\xedtulos a la vez",translateProgress:"La traducci\xf3n est\xe1 en proceso...",history:"Deshecho",historyEmpty:"El historial est\xe1 vac\xedo",description:"Editor de subt\xedtulos en l\xednea: vtt, srt, ass",uploadSubtitle:"Subt\xedtulo abierto",uploadSubtitleErr:"Tan solo est\xe1n soportados los siguientes tipos: vtt, srt, ass",uploadVideo:"Abrir archivo de v\xeddeo",uploadVideoErr:"Este formato no est\xe1 soportado",btnUploadSubtitle:"Abrir subt\xedtulo",btnUploadVideo:"Abrir v\xeddeo",btnDownloadSubtitle:"Descargar subt\xedtulo",startTime:"El formato del tiempo de inicio debe ser: [00:00:00.000]",endTime:"El formato del tiempo de fin debe ser: [00:00:00.000]",greater:"El tiempo de inicio no puede ser mayor o igual que el de fin",overlaps:"La duraci\xf3n se solapa con la anterior",start:"Inicio",end:"Fin",duration:"Duraci\xf3n",text:"Texto",operation:"Acci\xf3n",durationLimit:"El tiempo establecido no puede ser mayor que la duraci\xf3n del v\xeddeo",btnAddSubtitle:"A\xf1adir subt\xedtulo",btnTimeOffsetMinus:"Mover -100ms",btnTimeOffsetPlus:"Mover +100ms",btnUndo:"Deshacer",btnRemoveAll:"Borrar todos los subt\xedtulos",btnRemoveEmpty:"Borrar subt\xedtulos vac\xedos",btnRemoveCache:"Borrar cach\xe9",btnBatchTranslate:"Traducci\xf3n autom\xe1tica",to:"al",use:"Usar",btnOverallOffset:"Desplazamiento por la l\xednea de tiempo",on:"activo",off:"desactivado",moveInvalid:"Los par\xe1metros no son v\xe1lidos, int\xe9ntelo de nuevo",moveAcross:"No se puede mover a trav\xe9s de los subt\xedtulos, int\xe9ntelo de nuevo",deleteLine:"Borrar l\xednea",insertBefore:"Insertar antes",insertAfter:"Insertar despu\xe9s",mergeNext:"Unir con la siguiente",waveformBuildEnd:"Se han generado las ondas con \xe9xito"}}),p.a.options.timeOut=3e3,p.a.options.hideDuration=300,v.a.configure({minimum:0,showSpinner:!1}),o.a.render(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)?Object(f.t)("access"):r.a.createElement(tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[141,1,2]]]);
//# sourceMappingURL=main.2de6994d.chunk.js.map